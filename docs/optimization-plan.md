# ğŸ”§ å…¨å±€ç»„ä»¶ä¼˜åŒ–è®¡åˆ’

> **åˆ†æ”¯**ï¼š`perf/C_Table`  
> **æ¶æ„æ¨¡å¼**ï¼šè–„ UI å£³ + åš Composable å¼•æ“  
> **æœ€åæ›´æ–°**ï¼š2026-02-16

## å·²å®Œæˆ âœ…

| ç»„ä»¶             | ä¼˜åŒ–å‰è¡Œæ•° | ä¼˜åŒ–åè¡Œæ•° | æå–çš„ Composable                                                                                                                                                                   | é˜¶æ®µ    |
| ---------------- | ---------- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| **C_Table**      | ~1200      | ~300       | `useTableConfig` Â· `useTableManager` Â· `useTableColumns` Â· `useTableActions` Â· `usePagination` Â· `useRowEdit` Â· `useCellEdit` Â· `useModalEdit` Â· `useDynamicRow` Â· `useTableExpand` | Phase 0 |
| **C_Form**       | ~711       | ~308       | `useFormConfig` Â· `useFormState` Â· `useFormRenderer`                                                                                                                                | Phase 0 |
| **C_FormSearch** | 428        | ~230       | `useSearchHistory` Â· `useSearchState`                                                                                                                                               | Phase 1 |
| **C_Draggable**  | 554        | ~170       | `useDraggableLayout`                                                                                                                                                                | Phase 5 |

---

## å¾…ä¼˜åŒ–ç»„ä»¶æ¸…å•

### ğŸ”´ P0 â€” é«˜ä¼˜å…ˆçº§

#### 1. C_FilePreview

| é¡¹ç›®     | è¯¦æƒ…                                                                                                                                                                                                                                 |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| å½“å‰è¡Œæ•° | **816 è¡Œ**ï¼ˆindex.vueï¼‰+ 378 è¡Œï¼ˆdata.tsï¼‰+ 484 è¡Œï¼ˆindex.scssï¼‰                                                                                                                                                                     |
| æ ¸å¿ƒé—®é¢˜ | å•æ–‡ä»¶å¤„ç† PDF / Word / Excel / å›¾ç‰‡ / è§†é¢‘ / éŸ³é¢‘ / æ–‡æœ¬ 7 ç§é¢„è§ˆé€»è¾‘ï¼›UI çŠ¶æ€å˜é‡æ•£ä¹±ï¼ˆ`currentPage`ã€`totalPages`ã€`scale`ã€`wordZoom`ã€`showOutline`ã€`activeSheet`â€¦ï¼‰ï¼›å…¨éƒ¨é¢„è§ˆé€»è¾‘å†…è”æ— æå–ï¼›æ¨¡æ¿è¿‡é•¿                         |
| ä¼˜åŒ–æ–¹å‘ | â‘  æŒ‰æ–‡ä»¶ç±»å‹æ‹†åˆ†å­ç»„ä»¶ï¼š`PdfViewer` / `WordViewer` / `ExcelViewer` / `ImageViewer` / `MediaViewer` / `TextViewer`<br>â‘¡ æå– `useFilePreview` composableï¼ˆæ–‡ä»¶ç±»å‹åˆ¤å®š + é€šç”¨çŠ¶æ€ï¼‰<br>â‘¢ ç±»å‹è¿ç§»åˆ° `types/modules/file-preview.d.ts` |
| ç›®æ ‡     | index.vue â†’ ~200 è¡Œè–„å£³ + 6 ä¸ªå­ç»„ä»¶ + 1 ä¸ª composable                                                                                                                                                                               |

#### 2. C_AntVï¼ˆER / UML / BPMN å­å¸ƒå±€ï¼‰

| é¡¹ç›®     | è¯¦æƒ…                                                                                                                                                          |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| å½“å‰è¡Œæ•° | ER: **710**ã€UML: **696**ã€BPMN: **570**ï¼ˆå…± ~1976 è¡Œæ ¸å¿ƒä»£ç ï¼‰                                                                                               |
| æ ¸å¿ƒé—®é¢˜ | ä¸‰ä¸ªå­å¸ƒå±€é«˜åº¦é‡å¤ï¼štoolbarã€drawer ç¼–è¾‘å™¨ã€graph åˆå§‹åŒ–ã€ä¸»é¢˜å¤„ç†ã€å¯¼å‡ºé€»è¾‘ï¼›çˆ¶ç»„ä»¶æœ‰ `console.log` è°ƒè¯•æ®‹ç•™                                                 |
| ä¼˜åŒ–æ–¹å‘ | â‘  æå– `useGraphEditor` / `useGraphToolbar` / `useGraphExport` å…±äº« composable æ¶ˆé™¤é‡å¤<br>â‘¡ ç»Ÿä¸€ç±»å‹å®šä¹‰åˆ° `types/modules/antv.d.ts`<br>â‘¢ æ¸…ç† `console.log` |
| ç›®æ ‡     | æ¯ä¸ªå­å¸ƒå±€ â†’ ~250 è¡Œï¼Œæ¶ˆé™¤ ~60% é‡å¤ä»£ç                                                                                                                       |

#### 3. C_WorkFlow

| é¡¹ç›®     | è¯¦æƒ…                                                                                                                            |
| -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| å½“å‰è¡Œæ•° | **721 è¡Œ**ï¼ˆindex.vueï¼‰+ 115 è¡Œï¼ˆdata.tsï¼‰+ 4 ä¸ªèŠ‚ç‚¹å­ç»„ä»¶                                                                      |
| æ ¸å¿ƒé—®é¢˜ | èŠ‚ç‚¹æ“ä½œé€»è¾‘ï¼ˆadd/delete/connect/validateï¼‰å…¨éƒ¨å†…è”ï¼›`provide('showAddMenu')` / `provide('deleteNode')` ä½¿ç”¨ç²—ç³™                |
| ä¼˜åŒ–æ–¹å‘ | â‘  æå– `useWorkflowNodes` composableï¼ˆèŠ‚ç‚¹ CRUD + provide/injectï¼‰<br>â‘¡ æå– `useWorkflowValidation` composableï¼ˆæµç¨‹æ ¡éªŒé€»è¾‘ï¼‰ |
| ç›®æ ‡     | index.vue â†’ ~300 è¡Œ + 2 ä¸ª composable                                                                                           |

#### ~~4. C_Draggable~~ âœ… å·²å®Œæˆ

| é¡¹ç›®   | è¯¦æƒ…                                                                                |
| ------ | ----------------------------------------------------------------------------------- |
| ä¼˜åŒ–å‰ | **554 è¡Œ**ï¼ˆindex.vueï¼‰+ 313 è¡Œï¼ˆindex.scssï¼‰                                       |
| ä¼˜åŒ–å | **~170 è¡Œ**ï¼ˆindex.vueï¼‰+ 257 è¡Œï¼ˆuseDraggableLayout.tsï¼‰+ 110 è¡Œï¼ˆdraggable.d.tsï¼‰ |
| æå–   | â‘  ç±»å‹è¿ç§» `types/modules/draggable.d.ts`<br>â‘¡ `useDraggableLayout` composable      |
| ç˜¦èº«ç‡ | **-69%**ï¼ˆ554 â†’ 170 è¡Œï¼‰                                                            |

---

### ğŸŸ  P1 â€” ä¸­ä¼˜å…ˆçº§

| ç»„ä»¶               | è¡Œæ•°               | æ ¸å¿ƒé—®é¢˜                                               | ä¼˜åŒ–æ–¹å‘                                                   |
| ------------------ | ------------------ | ------------------------------------------------------ | ---------------------------------------------------------- |
| **C_Tree**         | 523                | render å‡½æ•° + æ ‘æ“ä½œé€»è¾‘å…¨å†…è”                         | æå– `useTreeOperations` composable                        |
| **C_GlobalSearch** | 494 + 742 SCSS     | é”®ç›˜å¯¼èˆªã€æœç´¢å†å²ã€èœå•æ‰å¹³åŒ–å…¨å†…è”                   | æå– `useSearchNavigation` / `useSearchHistory` composable |
| **C_FullCalendar** | 496                | è€å¼ runtime `defineProps`ï¼›ç¡¬ç¼–ç é¢œè‰²/ä¸­æ–‡            | æ”¹ä¸º type-based defineProps + data.ts åˆ†ç¦»                 |
| **C_Time**         | 394                | è¿‡åº¦æ³¨é‡Šï¼›å¤šä¸ª expose getter/setter å¯ç®€åŒ–             | ç²¾ç®€æ³¨é‡Š + åˆå¹¶ expose æ–¹æ³•                                |
| **C_Editor**       | 390                | æ‰‹åŠ¨äº‹ä»¶ç›‘å¬ã€setTimeout åˆå§‹åŒ–ã€`console.log` æ®‹ç•™    | VueUse äº‹ä»¶å¤„ç† + æ¸…ç†è°ƒè¯•ä»£ç                              |
| **C_VtableGantt**  | 382 + 528 data.ts  | è‡ªå®šä¹‰ `deepMerge` å†…è”åœ¨ç»„ä»¶ä¸­                        | `deepMerge` â†’ utils æå–                                   |
| **C_Code**         | 369                | ç¡¬ç¼–ç  `languageIcon`(24é¡¹) + `getLanguageTitle`(24é¡¹) | æ•°æ®ç§»åˆ° data.ts                                           |
| **C_City**         | 368 + 4813 city.ts | æ‰‹åŠ¨ `clickOutside` å¤„ç†                               | æ”¹ç”¨ VueUse `onClickOutside`                               |
| **C_Icon**         | 365                | 5 ç§å›¾æ ‡æ¨¡å¼éªŒè¯è§„åˆ™å†…è”                               | è§„åˆ™ map æå–åˆ° data.ts                                    |
| **C_ActionBar**    | 364                | æ··åˆæ¨¡æ¿ + `h()` æ¸²æŸ“å‡½æ•°é£æ ¼                          | ç»Ÿä¸€æ¸²æŸ“é£æ ¼                                               |
| **C_Date**         | 360                | 5 ç§æ—¥æœŸæ¨¡å¼é‡å¤ handler                               | handler åˆå¹¶ç®€åŒ–                                           |
| **C_TagsView**     | 346                | ç›´æ¥æ“ä½œ localStorageï¼›æ‰‹åŠ¨ DOM æ»šåŠ¨                   | é€šè¿‡ store ç®¡ç† + VueUse                                   |

---

### ğŸŸ¡ P2 â€” ä½ä¼˜å…ˆçº§ï¼ˆç»“æ„å°šå¯ï¼Œå°æ”¹å³å¯ï¼‰

| ç»„ä»¶       | è¡Œæ•° | é—®é¢˜                                | æ”¹åŠ¨                       |
| ---------- | ---- | ----------------------------------- | -------------------------- |
| C_Map      | 293  | `console.log` + `setTimeout` åˆå§‹åŒ– | æ¸…ç†è°ƒè¯•ä»£ç                |
| C_Notice   | 287  | å…¨éƒ¨ mock æ•°æ®                      | æ¥å…¥çœŸå® API               |
| C_Menu     | 273  | é€’å½’æŸ¥æ‰¾é€»è¾‘å¯ä¼˜åŒ–                  | å°å¹…é‡æ„                   |
| C_Markdown | 272  | å­˜æ ¹æ–¹æ³•æœªå®ç°                      | è¡¥å…¨æˆ–æ ‡æ³¨ TODO            |
| C_Progress | 240  | `setInterval` åŠ¨ç”»                  | æ”¹ç”¨ requestAnimationFrame |
| C_Captcha  | 183  | ç»“æ„æ¸…æ™°                            | æ— éœ€æ”¹åŠ¨                   |
| C_Cascade  | 155  | å†…è” scoped style                   | å°æ”¹                       |

---

### ğŸŸ¢ P3 â€” æ— éœ€ä¼˜åŒ–

| ç»„ä»¶            | è¡Œæ•° | è¯„ä»·                          |
| --------------- | ---- | ----------------------------- |
| C_Layout        | 97   | å”¯ä¸€ä½¿ç”¨ composable çš„ç»„ä»¶ âœ… |
| C_Steps         | 110  | ç®€æ´ï¼Œå¯¼å‡ºç±»å‹ âœ…             |
| C_Barcode       | 108  | ç®€æ´æ¸…æ™° âœ…                   |
| C_MenuTop       | 105  | ResizeObserver åˆç† âœ…        |
| C_Header        | 98   | åè°ƒç»„ä»¶ âœ…                   |
| C_Breadcrumb    | 84   | ç®€æ´ âœ…                       |
| C_Guide         | 87   | å¯æ¥å— âœ…                     |
| C_Language      | 74   | è½»é‡ âœ…                       |
| C_Theme         | 67   | ä½¿ç”¨ store âœ…                 |
| C_ReLoginDialog | 170  | ç»“æ„æ¸…æ™° âœ…                   |
| C_NavbarRight   | 164  | åè°ƒç»„ä»¶ âœ…                   |
| C_Settings      | 24   | çº¯åŒ…è£…å™¨ âœ…                   |
| C_Footer        | 21   | æœ€ç®€ âœ…                       |

---

## å…¨å±€ Code Smell ç»Ÿè®¡

| Code Smell                | æ¶‰åŠç»„ä»¶æ•° | è¯´æ˜                                                         |
| ------------------------- | ---------- | ------------------------------------------------------------ |
| **æ—  composable æå–**    | 34/38      | ä»… C_Layoutã€C_Tableã€C_Formã€C_FormSearch ä½¿ç”¨äº† composable |
| **å†…è”ç±»å‹å®šä¹‰**          | ~30/38     | ä»… C_ActionBarã€C_WorkFlowã€C_FormSearch ä» types/ å¯¼å…¥      |
| **å¤§æ–‡ä»¶ > 300 è¡Œ**       | **16 ä¸ª**  | è¯¦è§ä¸Šæ–¹åˆ†çº§                                                 |
| **console.log æ®‹ç•™**      | ~8 ä¸ª      | C_AntVã€C_Editorã€C_Mapã€C_Markdown ç­‰                       |
| **ç¡¬ç¼–ç ä¸­æ–‡å­—ç¬¦ä¸²**      | ~15 ä¸ª     | æœªèµ° i18n                                                    |
| **æ‰‹åŠ¨ addEventListener** | ~6 ä¸ª      | åº”ä½¿ç”¨ VueUse `useEventListener`                             |
| **setTimeout åˆå§‹åŒ–**     | ~5 ä¸ª      | åº”æ”¹ç”¨ `nextTick` æˆ– `await`                                 |

---

## æ¨èæ‰§è¡Œè·¯çº¿å›¾

| é˜¶æ®µ        | ç»„ä»¶                                      | é¢„ä¼°å·¥ä½œé‡ | çŠ¶æ€      |
| ----------- | ----------------------------------------- | ---------- | --------- |
| Phase 0     | C_Table + C_Form                          | â€”          | âœ… å·²å®Œæˆ |
| Phase 1     | C_FormSearch                              | 0.5 å¤©     | âœ… å·²å®Œæˆ |
| Phase 2     | C_FilePreview                             | 2 å¤©       | âœ… å·²å®Œæˆ |
| Phase 3     | C_AntV (ER/UML/BPMN)                      | 2-3 å¤©     | âœ… å·²å®Œæˆ |
| Phase 4     | C_WorkFlow                                | 1-2 å¤©     | âœ… å·²å®Œæˆ |
| **Phase 5** | **C_Draggable + C_Tree + C_GlobalSearch** | 2 å¤©       | ğŸ”„ è¿›è¡Œä¸­ |
| Phase 6     | P1 å‰©ä½™ç»„ä»¶æ‰¹é‡æ¸…ç†                       | 1-2 å¤©     | â³ å¾…å¼€å§‹ |
| Phase 7     | P2 å°æ”¹ + console å…¨å±€æ¸…ç†                | 1 å¤©       | â³ å¾…å¼€å§‹ |
