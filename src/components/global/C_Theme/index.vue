<!--
 * @Author: ChenYu ycyplus@gmail.com
 * @Date: 2025-05-13 14:22:46
 * @LastEditors: ChenYu ycyplus@gmail.com
 * @LastEditTime: 2025-05-13 14:23:20
 * @FilePath: \Robot_Admin\src\components\global\C_Theme\index.vue
 * @Description:  
 * Copyright (c) 2025 by CHENY, All Rights Reserved üòé. 
-->
<template>
  <NDropdown
    trigger="click"
    :options="options"
    @select="handleSelect"
  >
    <NButton text>
      <template #icon>
        <NIcon size="18">
          <span
            :class="currentIcon"
            class="text-current"
          />
        </NIcon>
      </template>
      ‰∏ªÈ¢òÊ®°Âºè
    </NButton>
  </NDropdown>
</template>

<script setup lang="ts">
  import { computed } from 'vue'
  import { useThemeStore, type ThemeMode } from '@/stores/theme'

  const themeStore = useThemeStore()

  // ‰ΩøÁî® UnoCSS ÂõæÊ†áÁ±ªÂêç
  const currentIcon = computed(() => {
    switch (themeStore.mode) {
      case 'light':
        return 'i-ion:sunny-sharp'
      case 'dark':
        return 'i-ion:moon-sharp'
      default:
        return 'i-ion:desktop-outline'
    }
  })

  // ‰∏ãÊãâÈÄâÈ°π
  const options = [
    {
      label: 'ÊµÖËâ≤Ê®°Âºè',
      key: 'light',
      icon: () => h('span', { class: 'i-ion:sunny-sharp text-4' }),
    },
    {
      label: 'Ê∑±Ëâ≤Ê®°Âºè',
      key: 'dark',
      icon: () => h('span', { class: 'i-ion:moon-sharp text-4' }),
    },
    {
      label: 'Ë∑üÈöèÁ≥ªÁªü',
      key: 'system',
      icon: () => h('span', { class: 'i-ion:desktop-outline text-4' }),
    },
  ]

  // ÈÄâÊã©Â§ÑÁêÜ
  const handleSelect = (key: string) => {
    themeStore.setMode(key as ThemeMode)
  }
</script>
